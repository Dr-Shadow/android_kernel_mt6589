#include <mach/mt_typedefs.h>

#define TEMPERATURE_T0                  110
#define TEMPERATURE_T1                  0
#define TEMPERATURE_T2                  25
#define TEMPERATURE_T3                  50
#define TEMPERATURE_T                   255 // This should be fixed, never change the value

#define FG_METER_RESISTANCE 	0

#define MAX_BOOTING_TIME_FGCURRENT	1*10 // 10s

#if defined(CONFIG_POWER_EXT)
#define OCV_BOARD_COMPESATE	72 //mV 
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
#else
#define OCV_BOARD_COMPESATE	0 //mV 
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
#endif

#define Q_MAX_POS_50	2344 /* 1982 */
#define Q_MAX_POS_25	2323 /* 2028 */
#define Q_MAX_POS_0	2200/*1849*/
#define Q_MAX_NEG_10	1664 /*723*/

#define Q_MAX_POS_50_H_CURRENT	2246 /*1962 */
#define Q_MAX_POS_25_H_CURRENT	2297 /*2006*/
#define Q_MAX_POS_0_H_CURRENT	 2039 /* 1781*/
#define Q_MAX_NEG_10_H_CURRENT	392 /*343*/

#define R_FG_VALUE 				20 // mOhm, base is 20
#define CURRENT_DETECT_R_FG	10  //1mA

#define OSR_SELECT_7			0

#define CAR_TUNE_VALUE			100 /* 94 //1.00 */

/////////////////////////////////////////////////////////////////////
// <DOD, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
{0	,3958},             
{1	,3882},         
{3	,3844},         
{4	,3834},         
{6	,3817},         
{7	,3812},         
{9	,3798},         
{10	,3791},         
{12	,3774},         
{13	,3764},         
{15	,3742},         
{16	,3733},         
{18	,3714},         
{19	,3708},         
{21	,3695},         
{22	,3690},         
{24	,3681},         
{25	,3678},         
{27	,3670},         
{28	,3666},         
{30	,3660},         
{31	,3656},         
{32	,3653},         
{34	,3646},         
{35	,3643},         
{37	,3636},         
{38	,3632},         
{40	,3626},         
{41	,3622},         
{43	,3616},         
{44	,3611},         
{46	,3604},         
{47	,3601},         
{49	,3595},         
{50	,3592},         
{52	,3585},         
{53	,3582},         
{55	,3576},         
{56	,3573},         
{58	,3568},         
{59	,3565},         
{61	,3560},         
{62	,3557},         
{64	,3553},         
{65	,3550},         
{67	,3546},         
{68	,3544},         
{69	,3542},         
{71	,3539},         
{72	,3538},         
{74	,3535},         
{75	,3533},         
{77	,3529},         
{78	,3528},         
{80	,3524},         
{81	,3522},         
{83	,3518},         
{84	,3516},         
{86	,3511},         
{87	,3508},         
{89	,3503},          
{90	,3499},
{92	,3491},
{93	,3488},
{95	,3479},
{96	,3474},
{98	,3462},
{99	,3459},
{100,3455},
  {100 , 3454},
	{100 , 3454}, 
	{100 , 3453},
	{100 , 3452},
	{100 , 3451},
	{100 , 3450},
	{100 , 3450}, 
	{100 , 3450}	       
};       
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
{0	,4087},         
{1	,4078},         
{3	,4060},         
{4	,4050},         
{6	,4034},         
{7	,4026},         
{9	,4010},         
{10	,4001},         
{12	,3981},         
{13	,3972},         
{15	,3955},         
{16	,3948},         
{18	,3933},         
{19	,3926},         
{21	,3912},         
{22	,3905},         
{24	,3891},         
{25	,3884},         
{27	,3872},         
{28	,3864},         
{30	,3851},         
{31	,3846},         
{32	,3839},         
{34	,3829},         
{35	,3824},         
{37	,3814},         
{38	,3809},         
{40	,3801},         
{41	,3797},         
{43	,3789},         
{44	,3784},     
{46	,3777},         
{47	,3774},         
{49	,3767},         
{50	,3765},         
{52	,3758},         
{53	,3755},         
{55	,3750},         
{56	,3747},         
{58	,3742},         
{59	,3740},         
{61	,3735},         
{62	,3734},         
{64	,3730},         
{65	,3728},         
{67	,3725},         
{68	,3723},         
{69	,3721},         
{71	,3718},         
{72	,3716},         
{74	,3712},         
{75	,3710},         
{77	,3704},         
{78	,3701},         
{80	,3694},         
{81	,3689},         
{83	,3679},         
{84	,3674},         
{86	,3663},         
{87	,3657},         
{89	,3650},          
{90	,3648},
{92	,3643},
{93	,3639},
{95	,3630},
{96	,3621},
{98	,3564},
{99	,3509},
{100,3448},
  {100 , 3424},
  {100 , 3396},
  {100 , 3383},
  {100 , 3374},
  {100 , 3372},
  {100 , 3370},
  {100 , 3369},
  {100 , 3369},
	       
};             

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
{0	,4326},
{1	,4297},
{3	,4271},
{4	,4258},
{6	,4234},
{7	,4222},
{9	,4196},
{10	,4187},
{12	,4162},
{13	,4149},
{15	,4126},
{16	,4115},
{18	,4091},
{19	,4080},
{21	,4058},
{22	,4043},
{24	,4025},
{25	,4015},
{27	,3994},
{28	,3983},
{30	,3960},
{31	,3949},
{32	,3938},
{34	,3918},
{35	,3909},
{37	,3891},
{38	,3882},
{40	,3867},
{41	,3859},
{43	,3846},
{44	,3840},
{46	,3824},
{47	,3817},
{49	,3806},
{50	,3800},
{52	,3790},
{53	,3785},
{55	,3776},
{56	,3771},
{58	,3762},
{59	,3758},
{61	,3750},
{62	,3747},
{64	,3740},
{65	,3737},
{67	,3730},
{68	,3727},
{69	,3725},
{71	,3720},
{72	,3718},
{74	,3714},
{75	,3711},
{77	,3706},
{78	,3703},
{80	,3696},
{81	,3692},
{83	,3682},
{84	,3677},
{86	,3663},
{87	,3655},
{89	,3644},
{90	,3642},
{92	,3636},
{93	,3632},
{95	,3622},
{96	,3613},
{98	,3568},
{99	,3519},
{100,3448},
  {100 , 3423},
	{100 , 3335}, 
	{100 , 3330},
	{100 , 3315},
	{100 , 3298},
	{100 , 3279},
	{100 , 3277}, 
	{100 , 3276}	       
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
{0	,4184},        
{1	,4156}, 	 
{3	,4133},         
{4	,4123},         
{6	,4101},         
{7	,4091},         
{9	,4071},         
{10	,4061},         
{12	,4044},         
{13	,4037},         
{15	,4020},      
{16	,4008},         
{18	,3985},         
{19	,3977},         
{21	,3960},         
{22	,3952},         
{24	,3938},         
{25	,3931},         
{27	,3917},         
{28	,3910},         
{30	,3895},         
{31	,3888},         
{32	,3881},         
{34	,3867},         
{35	,3860},         
{37	,3847},         
{38	,3842},         
{40	,3830},         
{41	,3825},         
{43	,3816},         
{44	,3810},         
{46	,3802},         
{47	,3798},         
{49	,3790},         
{50	,3786},         
{52	,3779},         
{53	,3776},         
{55	,3769},         
{56	,3766},         
{58	,3760},         
{59	,3758},         
{61	,3754},         
{62	,3751},         
{64	,3746},         
{65	,3745},         
{67	,3741},         
{68	,3740},         
{69	,3739},         
{71	,3736},         
{72	,3734},         
{74	,3731},         
{75	,3729},         
{77	,3723},         
{78	,3720},         
{80	,3714},         
{81	,3711},         
{83	,3700},         
{84	,3695},         
{86	,3684},         
{87	,3676},         
{89	,3665},         
{90	,3662},          
{92	,3657},
{93	,3654},
{95	,3646},
{96	,3638},
{98	,3580},
{99	,3521},
{100,3448},
  {100 , 3362},
	{100 , 3340}, 
	{100 , 3316},
	{100 , 3290},
	{100 , 3260},
	{100 , 3226},
	{100 , 3180}, 
	{100 , 3125}	       
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};      

/////////////////////////////////////////////////////////////////////
// <Rbat, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
{560	,3958},             
{708	,3882},         
{705	,3844},         
{703	,3834},         
{708	,3817},         
{708	,3812},         
{728	,3798},         
{740	,3791},         
{810	,3774},         
{848	,3764},         
{890	,3742},         
{890	,3733},         
{923	,3714},         
{960	,3708},         
{1018	,3695},         
{1018	,3690},         
{1085	,3681},         
{1085	,3678},         
{1085	,3670},         
{1130	,3666},         
{1130	,3660},         
{1130	,3656},         
{1130	,3653},         
{1105	,3646},         
{1105	,3643},         
{1088	,3636},         
{1088	,3632},         
{1063	,3626},         
{1053	,3622},         
{1038	,3616},         
{1033	,3611},         
{1013	,3604},         
{1005	,3601},         
{1000	,3595},         
{983	,3592},         
{953	,3585},         
{933	,3582},         
{913	,3576},         
{893	,3573},         
{873	,3568},         
{853	,3565},         
{833	,3560},         
{813	,3557},         
{793	,3553},         
{773	,3550},         
{753	,3546},         
{733	,3544},         
{713	,3542},         
{693	,3539},         
{673	,3538},         
{653	,3535},         
{633	,3533},         
{613	,3529},         
{593	,3528},         
{573	,3524},         
{553	,3522},         
{533	,3518},         
{513	,3516},         
{500	,3511},         
{500	,3508},         
{500	,3503},          
{500	,3499},
{500	,3491},
{500	,3488},
{500	,3479},
{500	,3474},
{500	,3462},
{500	,3459},
{500,3455},
  {500 , 3454},
	{500 , 3454}, 
	{500 , 3453},
	{500 , 3452},
	{500 , 3451},
	{500 , 3450},
	{500 , 3450}, 
	{500 , 3450}	     
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
{320	,4087},         
{340	,4078},         
{345	,4060},         
{350	,4050},         
{354	,4034},         
{358	,4026},         
{360	,4010},         
{365	,4001},         
{375	,3981},         
{383	,3972},         
{388	,3955},         
{393	,3948},         
{395	,3933},         
{390	,3926},         
{388	,3912},         
{384	,3905},         
{380	,3891},         
{375	,3884},         
{373	,3872},         
{365	,3864},         
{363	,3851},         
{360	,3846},         
{358	,3839},         
{358	,3829},         
{358	,3824},         
{363	,3814},         
{368	,3809},         
{373	,3801},         
{375	,3797},         
{385	,3789},         
{390	,3784},     
{400	,3777},         
{408	,3774},         
{418	,3767},         
{420	,3765},         
{423	,3758},         
{423	,3755},         
{423	,3750},         
{423	,3747},         
{425	,3742},         
{425	,3740},         
{425	,3735},         
{425	,3734},         
{425	,3730},         
{425	,3728},         
{425	,3725},         
{425	,3723},         
{425	,3721},         
{425	,3718},         
{425	,3716},         
{430	,3712},         
{430	,3710},         
{430	,3704},         
{430	,3701},         
{450	,3694},         
{470	,3689},         
{500	,3679},         
{555	,3674},         
{570	,3663},         
{585	,3657},         
{600	,3650},          
{613	,3648},
{625	,3643},
{640	,3639},
{655	,3630},
{660	,3621},
{683	,3564},
{700	,3509},
{608,3448},
  {490 , 3424},
  {480 , 3396},
  {480 , 3383},
  {480 , 3374},
  {480 , 3372},
  {480 , 3370},
  {480 , 3369},
  {485 , 3369},
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
{118	,4326},
{120	,4297},
{123	,4271},
{125	,4258},
{130	,4234},
{135	,4222},
{140	,4196},
{148	,4187},
{148	,4162},
{148	,4149},
{150	,4126},
{150	,4115},
{153	,4091},
{158	,4080},
{158	,4058},
{160	,4043},
{163	,4025},
{163	,4015},
{170	,3994},
{170	,3983},
{170	,3960},
{178	,3949},
{183	,3938},
{193	,3918},
{203	,3909},
{205	,3891},
{205	,3882},
{205	,3867},
{183	,3859},
{173	,3846},
{163	,3840},
{153	,3824},
{150	,3817},
{153	,3806},
{150	,3800},
{155	,3790},
{158	,3785},
{163	,3776},
{170	,3771},
{168	,3762},
{168	,3758},
{165	,3750},
{163	,3747},
{168	,3740},
{168	,3737},
{168	,3730},
{165	,3727},
{163	,3725},
{160	,3720},
{161	,3718},
{162	,3714},
{163	,3711},
{164	,3706},
{165	,3703},
{170	,3696},
{175	,3692},
{180	,3682},
{185	,3677},
{190	,3663},
{195	,3655},
{200	,3644},
{207	,3642},
{215	,3636},
{215	,3632},
{215	,3622},
{215	,3613},
{220	,3568},
{220	,3519},
{213,3448},
  {215 , 3423},
	{215 , 3335}, 
	{215 , 3330},
	{215 , 3315},
	{185 , 3298},
	{185 , 3279},
	{185 , 3277}, 
	{185 , 3276}	       
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
{118	,4184},        
{118	,4156}, 	 
{118	,4133},         
{118	,4123},         
{118	,4101},         
{120	,4091},         
{123	,4071},         
{123	,4061},         
{125	,4044},         
{125	,4037},         
{125	,4020},      
{125	,4008},         
{125	,3985},         
{130	,3977},         
{130	,3960},         
{130	,3952},         
{135	,3938},         
{140	,3931},         
{143	,3917},         
{145	,3910},         
{155	,3895},         
{155	,3888},         
{155	,3881},         
{153	,3867},         
{153	,3860},         
{133	,3847},         
{133	,3842},         
{123	,3830},         
{123	,3825},         
{118	,3816},         
{120	,3810},         
{123	,3802},         
{123	,3798},         
{123	,3790},         
{123	,3786},         
{130	,3779},         
{135	,3776},         
{135	,3769},         
{140	,3766},         
{138	,3760},         
{130	,3758},         
{125	,3754},         
{123	,3751},         
{128	,3746},         
{128	,3745},         
{130	,3741},         
{130	,3740},         
{128	,3739},         
{125	,3736},         
{125	,3734},         
{125	,3731},         
{125	,3729},         
{125	,3723},         
{130	,3720},         
{130	,3714},         
{130	,3711},         
{130	,3700},         
{128	,3695},         
{128	,3684},         
{128	,3676},         
{128	,3665},         
{128	,3662},          
{128	,3657},
{133	,3654},
{133	,3646},
{133	,3638},
{145	,3580},
{155	,3521},
{155,3448},
  {155 , 3362},
	{155 , 3340}, 
	{155 , 3316},
	{155 , 3290},
	{140 , 3260},
	{140 , 3226},
	{130 , 3180}, 
	{130 , 3125}	          
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};      


int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

//#define CONFIG_POWER_VERIFY
